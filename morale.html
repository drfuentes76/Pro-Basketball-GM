<!DOCTYPE html>
<html>
<head><title>📊 Team Morale Dashboard</title><link rel="stylesheet" href="style.css"></head>
<body>
<h1>📊 Team Chemistry & Morale</h1>
<div id="chemistry"></div>
<table border="1" cellpadding="6" style="width:100%;margin-top:1rem;">
  <thead>
    <tr><th>Name</th><th>Position</th><th>Rating</th><th>Morale</th><th>Reaction</th></tr>
  </thead>
  <tbody id="moraleTable"></tbody>
</table>
<div class="nav"><a href="index.html">⬅️ Main Menu</a></div>
<script>
const gameState = JSON.parse(localStorage.getItem("basketballGM")) || {};
const table = document.getElementById("moraleTable");
const moraleScores = { "Icon": 5, "Leader": 4, "Neutral": 3, "Shocked": 2, "Unsettled": 1 };
const reactions = {
  "Icon": "🧱 Solid as a rock",
  "Leader": "🔥 Motivating the team",
  "Neutral": "😐 All business",
  "Shocked": "😲 Trade blindsided him",
  "Unsettled": "😤 Locker room tension"
};

function calcChemistry() {
  if (!gameState.roster || gameState.roster.length === 0) return 0;
  const moraleSum = gameState.roster.reduce((sum, p) => sum + (moraleScores[p.morale] || 3), 0);
  return Math.round((moraleSum / (gameState.roster.length * 5)) * 100);
}

function updateDisplay() {
  table.innerHTML = "";
  gameState.roster.forEach(p => {
    const row = document.createElement("tr");
    row.innerHTML = `<td>${p.name}</td><td>${p.position}</td><td>${p.rating}</td><td>${p.morale || "Neutral"}</td><td>${reactions[p.morale] || reactions["Neutral"]}</td>`;
    table.appendChild(row);
  });
  document.getElementById("chemistry").innerHTML = `<h3>Team Chemistry: ${calcChemistry()}%</h3>`;
}
updateDisplay();
</script>
</body>
</html>
