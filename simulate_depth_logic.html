<!DOCTYPE html>
<html>
<head><title>ğŸ“ˆ Sim Using Depth Chart</title><link rel="stylesheet" href="style.css"></head>
<body>
<h1>ğŸ“ˆ Simulate Game (Using Depth Chart)</h1>
<button onclick="simulate()">â–¶ï¸ Sim Game</button>
<pre id="output"></pre>
<div class="nav"><a href="index.html">â¬…ï¸ Main Menu</a></div>

<script>
function simulate() {
  const gameState = JSON.parse(localStorage.getItem("basketballGM")) || {};
  const starters = gameState.roster.filter(p => p.depthRank === 1);
  if (starters.length < 5) {
    document.getElementById("output").textContent = "â— Not enough starters defined.";
    return;
  }

  const avgRating = starters.reduce((sum, p) => sum + p.rating, 0) / starters.length;
  const strategy = gameState.strategy || "balanced";
  const mod = strategy === "offensive" ? 1.1 : strategy === "defensive" ? 0.9 : 1.0;
  const power = avgRating * mod;
  const opponent = 85 + Math.random() * 20;
  const win = power > opponent;

  document.getElementById("output").textContent =
    `Your power: ${Math.round(power)}\nOpponent: ${Math.round(opponent)}\nResult: ${win ? "ğŸ† WIN" : "âŒ LOSS"}`;
}
</script>
</body>
</html>
