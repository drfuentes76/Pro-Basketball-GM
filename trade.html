<!DOCTYPE html>
<html>
<head>
  <title>🔁 Trade Players</title>
  <link rel="stylesheet" href="style.css">
  <style>
    body { background: #f3e5f5; }
    h1 { color: #6a1b9a; }
    select, button { width: 90%; margin: 10px auto; display: block; padding: 10px; }
  </style>
</head>
<body>
<h1>🔁 Trade Player</h1>
<select id="playerSelect"></select>
<button onclick="confirmTrade()">Trade Selected</button>
<pre id="msg"></pre>
<div class="navbar">
  <a href="index.html">🏠 Home</a>
  <a href="roster.html">📋 Roster</a>
  <a href="depth.html">📊 Depth</a>
  <a href="save.html">💾 Save</a>
  <a href="fullseason.html">▶️ Sim</a>
</div>
<script>
const gameState = JSON.parse(localStorage.getItem("basketballGM")) || {};
const select = document.getElementById("playerSelect");
const msg = document.getElementById("msg");

function populateDropdown() {
  select.innerHTML = "";
  if (!gameState.roster || gameState.roster.length === 0) {
    const opt = document.createElement("option");
    opt.textContent = "No players available";
    select.appendChild(opt);
    return;
  }
  gameState.roster.forEach(p => {
    const opt = document.createElement("option");
    opt.value = p.name;
    opt.textContent = `${p.name} (${p.position}, OVR ${p.rating})`;
    select.appendChild(opt);
  });
}
function confirmTrade() {
  const selected = select.value;
  if (!selected) return;
  if (confirm(`Are you sure you want to trade ${selected}?`)) {
    const idx = gameState.roster.findIndex(p => p.name === selected);
    if (idx !== -1) {
      const removed = gameState.roster.splice(idx, 1);
      localStorage.setItem("basketballGM", JSON.stringify(gameState));
      populateDropdown();
      msg.textContent = `✅ Traded ${removed[0].name}`;
    }
  }
}
populateDropdown();
</script>
</body>
</html>
