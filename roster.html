<!DOCTYPE html>
<html>
<head>
  <title>📋 View Roster (All Teams)</title>
  <link rel="stylesheet" href="style.css">
  <style>
    body { background: #e0f7fa; }
    h1, h3 { color: #00796b; text-align: center; }
    select { width: 60%; padding: 8px; display: block; margin: 0 auto 20px; }
    table { background: white; width: 100%; border-collapse: collapse; }
    th, td { border: 1px solid #aaa; padding: 8px; text-align: center; }
  </style>
</head>
<body>
<h1>📋 Roster Viewer</h1>
<h3>Select Team</h3>
<select id="teamSelector" onchange="renderRoster()"></select>
<table>
<thead><tr><th>Name</th><th>Pos</th><th>OVR</th><th>Age</th><th>Morale</th><th>Contract</th><th>Status</th></tr></thead>
<tbody id="rosterTable"></tbody>
</table>
<div class="navbar">
  <a href="index.html">🏠 Home</a>
  <a href="roster.html">📋 Roster</a>
  <a href="depth.html">📊 Depth</a>
  <a href="save.html">💾 Save</a>
  <a href="fullseason.html">▶️ Sim</a>
</div>
<script>
const gameState = JSON.parse(localStorage.getItem("basketballGM")) || {};
const selector = document.getElementById("teamSelector");
const table = document.getElementById("rosterTable");

function renderSelector() {
  selector.innerHTML = "";
  const teams = Object.keys(gameState.teams || { "My Team": { roster: gameState.roster || [] } });
  teams.forEach(team => {
    const opt = document.createElement("option");
    opt.value = team;
    opt.textContent = team;
    selector.appendChild(opt);
  });
}
function renderRoster() {
  const team = selector.value;
  const roster = (gameState.teams?.[team]?.roster) || [];
  table.innerHTML = "";
  roster.forEach(p => {
    const row = document.createElement("tr");
    row.innerHTML = `<td>${p.name}</td><td>${p.position}</td><td>${p.rating}</td><td>${p.age || "-"}</td><td>${p.morale || "-"}</td><td>$${p.contract || "?"}M</td><td>${p.injured ? "🚑 Injured" : "✅ Active"}</td>`;
    table.appendChild(row);
  });
}
renderSelector();
renderRoster();
</script>
</body>
</html>
